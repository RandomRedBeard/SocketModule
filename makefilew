CC = cl
CFLAG = /EHsc /c
INCLUDES = /I include
LINKS = 
DEFINES = /DBUILDING_DLL

OUT=".\"

TARGET = $(OUT)\libsocket

OBJS = src\ServerSocket.o src\Socket.o src\io.o

src\ServerSocket.o:
	$(CC) $(CFLAG) $(INCLUDES) $(DEFINES) src\ServerSocket.cpp /Fo: src\ServerSocket.o

src\Socket.o:
	$(CC) $(CFLAG) $(INCLUDES) $(DEFINES) src\Socket.cpp /Fo: src\Socket.o

src\io.o:
	$(CC) $(CFLAG) $(INCLUDES) $(DEFINES) src\io.cpp /Fo: src\io.o

all: $(TARGET)

$(TARGET): $(OBJS)
    $(CC) /LD $(OBJS) /Fe: $(TARGET)
	copy *.h $(OUT)\

clean:
    del $(OBJS) *.lib *.dll *.exp *.exe