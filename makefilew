CC = cl
CFLAG = /EHsc /c
INCLUES = 
LINKS = 
DEFINES = /DBUILDING_DLL

OUT=".\"

TARGET = $(OUT)\libsocket

OBJS = ServerSocket.o Socket.o io.o myPoll.o

ServerSocket.o:
	$(CC) $(CFLAG) $(DEFINES) ServerSocket.cpp /Fo: ServerSocket.o
Socket.o:
	$(CC) $(CFLAG) $(DEFINES) Socket.cpp /Fo: Socket.o
io.o:
	$(CC) $(CFLAG) $(DEFINES) io.cpp /Fo: io.o
myPoll.o:
	$(CC) $(CFLAG) $(DEFINES) myPoll.cpp /Fo: myPoll.o

all: $(TARGET)

$(TARGET): $(OBJS)
    $(CC) /LD $(OBJS) /Fe: $(TARGET)
	copy *.h $(OUT)\

clean:
    del $(OBJS) *.lib *.dll *.exp *.exe